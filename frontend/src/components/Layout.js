import React, { useState } from 'react';\nimport { Outlet, Link, useLocation, useNavigate } from 'react-router-dom';\nimport {\n  HomeIcon,\n  BuildingOfficeIcon,\n  ClipboardDocumentListIcon,\n  StarIcon,\n  TruckIcon,\n  BellIcon,\n  UserIcon,\n  ArrowRightOnRectangleIcon,\n  Bars3Icon,\n  XMarkIcon,\n  BeakerIcon,\n  Cog6ToothIcon,\n  ShieldCheckIcon,\n} from '@heroicons/react/24/outline';\nimport { useAuth } from '../context/AuthContext';\nimport NotificationBadge from './NotificationBadge';\n\nconst Layout = () => {\n  const { user, logout } = useAuth();\n  const location = useLocation();\n  const navigate = useNavigate();\n  const [sidebarOpen, setSidebarOpen] = useState(false);\n\n  const handleLogout = () => {\n    logout();\n    navigate('/login');\n  };\n\n  const navigation = [\n    { name: 'Dashboard', href: '/dashboard', icon: HomeIcon, roles: ['all'] },\n    { name: 'Drug Search', href: '/drugs', icon: BeakerIcon, roles: ['all'] },\n    { name: 'Pharmacies', href: '/pharmacies', icon: BuildingOfficeIcon, roles: ['all'] },\n    { name: 'Inventory', href: '/inventory', icon: ClipboardDocumentListIcon, roles: ['pharmacy', 'admin'] },\n    { name: 'Reviews', href: '/reviews', icon: StarIcon, roles: ['all'] },\n    { name: 'Delivery', href: '/delivery', icon: TruckIcon, roles: ['all'] },\n    { name: 'Notifications', href: '/notifications', icon: BellIcon, roles: ['all'] },\n    { name: 'Profile', href: '/profile', icon: UserIcon, roles: ['all'] },\n    { name: 'Admin', href: '/admin', icon: ShieldCheckIcon, roles: ['admin'] },\n  ];\n\n  const filteredNavigation = navigation.filter(item => \n    item.roles.includes('all') || item.roles.includes(user?.role)\n  );\n\n  const isActive = (path) => location.pathname === path;\n\n  return (\n    <div className="flex h-screen bg-secondary-50">\n      {/* Mobile sidebar */}\n      <div className={`fixed inset-0 z-50 lg:hidden ${sidebarOpen ? 'block' : 'hidden'}`}>\n        <div className="fixed inset-0 bg-secondary-900 bg-opacity-75" onClick={() => setSidebarOpen(false)} />\n        <div className="relative flex w-full max-w-xs flex-col bg-white shadow-xl">\n          <div className="absolute top-0 right-0 -mr-12 pt-2">\n            <button\n              type="button"\n              className="ml-1 flex h-10 w-10 items-center justify-center rounded-full focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white"\n              onClick={() => setSidebarOpen(false)}\n            >\n              <XMarkIcon className="h-6 w-6 text-white" aria-hidden="true" />\n            </button>\n          </div>\n          <SidebarContent navigation={filteredNavigation} isActive={isActive} user={user} />\n        </div>\n      </div>\n\n      {/* Desktop sidebar */}\n      <div className="hidden lg:flex lg:w-64 lg:flex-col lg:fixed lg:inset-y-0">\n        <SidebarContent navigation={filteredNavigation} isActive={isActive} user={user} />\n      </div>\n\n      {/* Main content */}\n      <div className="lg:pl-64 flex flex-col flex-1">\n        {/* Top bar */}\n        <div className="sticky top-0 z-10 bg-white shadow-sm border-b border-secondary-200">\n          <div className="flex items-center justify-between px-4 sm:px-6 lg:px-8 py-4">\n            <button\n              type="button"\n              className="lg:hidden -ml-0.5 -mt-0.5 h-12 w-12 inline-flex items-center justify-center rounded-md text-secondary-500 hover:text-secondary-900 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-500"\n              onClick={() => setSidebarOpen(true)}\n            >\n              <Bars3Icon className="h-6 w-6" aria-hidden="true" />\n            </button>\n            <div className="flex items-center space-x-4">\n              <NotificationBadge />\n              <div className="relative">\n                <button\n                  onClick={handleLogout}\n                  className="flex items-center space-x-2 text-sm text-secondary-700 hover:text-secondary-900 px-3 py-2 rounded-md hover:bg-secondary-100 transition-colors duration-200"\n                >\n                  <ArrowRightOnRectangleIcon className="h-5 w-5" />\n                  <span className="hidden sm:inline">Logout</span>\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Page content */}\n        <main className="flex-1 overflow-y-auto">\n          <div className="py-6">\n            <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">\n              <Outlet />\n            </div>\n          </div>\n        </main>\n      </div>\n    </div>\n  );\n};\n\nconst SidebarContent = ({ navigation, isActive, user }) => {\n  const getRoleColor = (role) => {\n    switch (role) {\n      case 'admin': return 'bg-danger-100 text-danger-800';\n      case 'pharmacy': return 'bg-primary-100 text-primary-800';\n      case 'delivery': return 'bg-warning-100 text-warning-800';\n      case 'patient': return 'bg-success-100 text-success-800';\n      default: return 'bg-secondary-100 text-secondary-800';\n    }\n  };\n\n  return (\n    <>\n      {/* Logo */}\n      <div className="flex items-center h-16 px-4 bg-primary-600 shadow-lg">\n        <h1 className="text-xl font-bold text-white">TenaMed</h1>\n      </div>\n\n      {/* Navigation */}\n      <nav className="flex-1 px-4 py-6 space-y-2 bg-white border-r border-secondary-200">\n        {navigation.map((item) => {\n          const Icon = item.icon;\n          return (\n            <Link\n              key={item.name}\n              to={item.href}\n              className={`flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-all duration-200 ${\n                isActive(item.href)\n                  ? 'bg-primary-100 text-primary-700 border-l-4 border-primary-600'\n                  : 'text-secondary-600 hover:bg-secondary-100 hover:text-secondary-900'\n              }`}\n            >\n              <Icon className="mr-3 h-5 w-5" />\n              {item.name}\n            </Link>\n          );\n        })}\n      </nav>\n\n      {/* User info */}\n      <div className="border-t border-secondary-200 p-4 bg-white">\n        <div className="flex items-center space-x-3">\n          <div className="flex-shrink-0">\n            <div className="h-8 w-8 rounded-full bg-primary-600 flex items-center justify-center text-white text-sm font-medium">\n              {user?.firstName?.charAt(0).toUpperCase()}\n            </div>\n          </div>\n          <div className="flex-1 min-w-0">\n            <p className="text-sm font-medium text-secondary-900 truncate">\n              {user?.firstName} {user?.lastName}\n            </p>\n            <span className={`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${getRoleColor(user?.role)}`}>\n              {user?.role}\n            </span>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default Layout;
